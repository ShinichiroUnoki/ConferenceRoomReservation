<script>
    $(function () {
        function eventCalendar() {
            return $('#calendar').fullCalendar({});
        };

        function clearCalendar() {
            $('#calendar').html('');
        };

        $(document).on('turbolinks:load', function () {
            eventCalendar();
        });

        $(document).on('turbolinks:before-cache', clearCalendar);

        $('#calendar').fullCalendar({
            events: '/schedules/top/<%= @room.id %>.json',

            displayEventTime: true,
            displayEventEnd: {
                month: true,
                basicWeek: true,
                "default": true
            },
            timeFormat: "HH:mm",
        });
    });
</script>

<h1><%= @room.name %></h1>
<%= link_to "新規作成", "/schedules/new/#{@room.id}" %></br>
<div id="calendar"></div>

<!-- json取得用で追加 -->
<input name="schedules" type="hidden" value=<%= @schedules %> class="schedules"/>